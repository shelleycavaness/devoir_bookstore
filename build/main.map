{"version":3,"sources":["webpack:///webpack/bootstrap a89749cfc3c93605d185","webpack:///external \"express\"","webpack:///external \"mongoose\"","webpack:///external \"multer\"","webpack:///./src/index.js","webpack:///external \"volleyball\"","webpack:///external \"dotenv/config\"","webpack:///./src/routes/routes.js","webpack:///./src/models/book.js","webpack:///external \"path\""],"names":["PORT","process","env","upload","multer","dest","mongoose","connect","db","connection","on","console","error","bind","once","log","app","express","use","json","urlencoded","extended","static","set","path","join","__dirname","listen","bookRouter","Router","get","req","res","Book","find","err","books","send","render","post","single","addBook","body","file","cover","filename","save","book","redirect","findById","params","id","put","_id","Object","assign","delete","remove","Schema","bookSchema","title","type","String","index","author","editor","price","Number","pages","model"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a89749cfc3c93605d185","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 2\n// module chunks = 0","import express from 'express'\nimport mongoose from 'mongoose'\nimport volleyball from 'volleyball'\nconst { PORT } = process.env;\nimport \"dotenv/config\";\nimport {bookRouter} from './routes/routes'\nimport path from 'path'\nimport multer from 'multer'\nconst upload = multer({dest: 'public/uploads' }) //do i need the parentheses?\n\n\n//const PORT = process.env.PORT ||4567\nmongoose.connect('mongodb://localhost/bookstore_dbs');\nconst db = mongoose.connection;\ndb.on('error', console.error.bind(console, 'connection error:'))\ndb.once('open', () => {\n console.log(`[MongoDB] connected`);\n})\n\nconst app = express()\napp.use(volleyball)\napp.use(express.json())\napp.use(express.urlencoded({extended:true}))\napp.use(express.static('public')) //this allows younot to write all of the path in the pug\napp.use('/', bookRouter)\n//view for pug\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'pug')\n\n\n\n\napp.listen(PORT);\nconsole.log(`i'm working on port ${PORT}`)\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"volleyball\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"volleyball\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"dotenv/config\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv/config\"\n// module id = 6\n// module chunks = 0","import express from 'express';\nconst bookRouter = express.Router()\nimport {Book} from '../models/book'\nimport multer from 'multer'\nconst upload = multer({dest: 'public/uploads' })\n\nbookRouter.get('/', (req, res)=>{\n    Book.find({}, (err, books) =>{\n        if(err)res.send(err)\n       // res.json(books)\n        res.render('index', {books} ) // pre Ecma6 {books:books}\n    })\n})\n\n\nbookRouter.get('/mybook', (req, res)=>{\n    res.render('newbook')\n})\n\nbookRouter.post('/add', upload.single('cover'), //name of photo in model\n(req, res)=>{\n    const addBook = new Book(req.body)\n    if(req.file){\n        addBook.cover = req.file.filename  //the new instance of the book plus the name of the model\n    } else{\n        addBook.cover =\"image not available\"\n    }\n\n    addBook.save((err, book) =>{ \n        if(err) res.send(err)\n        //res.json(book)\n        res.redirect('/')\n       \n    })\n})\n\n\nbookRouter.get('/:id', (req, res)=>{\n    Book.findById(req.params.id, (err, book) =>{\n        if(err) res.send(err)\n        //res.json(book) \n       res.render('detail_book', {book})\n    })\n})\n\nbookRouter.put('/:id', (req, res)=>{\n    Book.findById({_id:req.params.id}, (err, book) =>{\n        if(err) res.send(err)\n        Object.assign(book, req.body).save((err, book) =>{\n            if(err) res.send(err)\n            //res.json({message:'book added', book})\n        })\n    })\n})\nbookRouter.delete('/:id', (req, res) =>{\n    Book.findById({_id:req.params.id}, (err, book) => {\n        if(err) res.send(err)\n        book.remove({_id:req.params.id}, (err, book) => {\n            if(err) res.send(err)\n            res.send('book removed')\n        })\n    })\n})\n\n//////////////////////render pages/////////////////////////////////\n\n\n\n\n\nexport { bookRouter }\n\n\n// WEBPACK FOOTER //\n// ./src/routes/routes.js","import mongoose from 'mongoose';\nconst Schema= mongoose.Schema\n\nconst bookSchema = new Schema({\n    title:{ type: String, index:true},\n    author: {type: String, index:true},\n    editor: String,\n    price: Number,\n    pages: Number,\n    cover: String\n})\n\nconst Book = mongoose.model('Book', bookSchema)\nexport { Book } \n\n\n// WEBPACK FOOTER //\n// ./src/models/book.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}